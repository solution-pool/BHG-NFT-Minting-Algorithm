<!DOCTYPE html>
<html lang="">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coral Unique 1</title>
    <style>
        body {
        padding: 0;
        margin: 0;
        }
    </style>
    </head>
    <body>
        <canvas id="canvas">
            <script>
                Math.seedrandom=function(t){var s=4294967295,i=123456789+t&s,e=987654321-t&s;return function(){var t=((e=36969*(65535&e)+(e>>>16)&s)<<16)+(65535&(i=18e3*(65535&i)+(i>>>16)&s))>>>0;return t/=4294967296}};class Zonemap{constructor(t){t=parseInt(t);this.VZ=[],this.Z=[],this.vnum=0,this.vsize=RS,this.nz=t,this.total_zones=t*t,this.greatest_zone_size=RS;for(let t=0;t<this.total_zones;t++){let s=[];s.i=t,s.size=RS,s.count=0,s.ZV=[],this.Z[t]=s}}_ac(t,s){this.X=t,this.Y=s}_ad(t){t=parseInt(t);let s=this.vnum;const i=this.X[t],e=this.Y[t],h=this._ai(i,e);this._af(h,s),this.VZ[s]=h;const n=[];return this.vnum>=this.vsize-1&&(this.VZ=n,this.vsize=2*this.vsize),this.vnum+=1,s}_ae(t){return t=parseInt(t),this._ah(this.VZ[t],t),this.VZ[t]=-1,1}_af(t,s){t=parseInt(t),s=parseInt(s);let i=this.Z[t];return null==i&&((i=[]).count=0,i.ZV=[],i.i=0,i.size=SIZE,this.Z.push(i)),i.ZV[i.count]=s,i.count+=1,i.count>=i.size-1?this._ag(i):1}_ag(t){let s=2*t.size;return t.ZV=[],t.size=s,s>this.greatest_zone_size&&(this.greatest_zone_size=s),this.Z.push(t),1}_ah(t,s){t=parseInt(t),s=parseInt(s);let i=this.Z[t];for(let t=0;t<i.count;t++)if(i.ZV[t]==s)return i.ZV[t]=i.ZV[i.count-1],i.count-=1,1;return-1}_ai(t,s){const i=this.nz;return i*parseInt(t*i)+parseInt(s*i)}_aj(t){t=parseInt(t);const s=this.X[t],i=this.Y[t],e=parseInt(this._ai(s,i)),h=parseInt(this.VZ[t]);return h<0?-1:e!=h?(this._ah(h,t),this._af(e,t),this.VZ[t]=e,1):-1}_ak(t,s,i,e){const h=this.nz,n=parseInt(t*h),r=parseInt(s*h);let o=0;const c=i*i;for(let i=Math.max(n-1,0);i<Math.min(n+2,h);i++)for(let n=Math.max(r-1,0);n<Math.min(r+2,h);n++){const r=this.Z[i*h+n];for(let i=0;i<r.count;i++){const h=t-this.X[r.ZV[i]],n=s-this.Y[r.ZV[i]];h*h+n*n<c&&(e[o]=r.ZV[i],o+=1)}}return o}}class Segments{constructor(t,s){this.X=[],_e(this.X,t,0),this.Y=[],_e(this.Y,t,0),this.VA=[],_e(this.VA,t,0),this.VS=[],_e(this.VS,t,-1),this.EV=[],_e(this.EV,2*t,-1),this.VE=[],_e(this.VE,2*t,-1),this.nmax=t,this.vnum=0,this.edgeNumber=0,this.snum=0,this.zonewidth=s,this.nz=1/s,this.nz<3&&(this.nz=1,this.zonewidth=1),this.zonemap=new Zonemap(this.nz),this.zonemap._ac(this.X,this.Y)}_m(t,s){return t<0||t>1||s<0||s>1?-1:1}_n(t,s,i,e){if(this._m(t,s)<0)throw new Error("Vertext outside unit square.");const h=this.vnum;return this.X[h]=t,this.Y[h]=s,this.VA[h]=1,this.VS[h]=i,this.zonemap._ad(h),this.vnum=h+1,h}_o(t,s){return t<0||t>this.vnum-1||this.VA[t]<0?-1:s<0||s>this.vnum-1||this.VA[s]<0?-1:1}_p(t,s){t=parseInt(t),s=parseInt(s);const i=this.edgeNumber;if(this._o(t,s)<0)throw new Error("invalid vertex in _p v1, v2, "+t+","+s);return this.EV[2*i]=t,this.EV[2*i+1]=s,_f(t,i,this.VE),_f(s,i,this.VE),this.edgeNumber+=1,i}_q(t){return this.EV[2*t]>-1&&this.EV[2*t+1]>-1?1:-1}_r(t){return this.VA[t]=-1,this.zonemap._ae(t),1}_s(t){if(t<0||t>this.edgeNumber-1)throw new Error("invalid edge in _s e1"+t);let s=this.EV[2*t],i=this.EV[2*t+1];return this.EV[2*t]=-1,this.EV[2*t+1]=-1,s>-1&&_g(s,t,this.VE),i>-1&&_g(i,t,this.VE),1}_t(t){let s=this.edgeNumber,i=0;for(let e=0;e<s;e++)if(this.EV[2*e]>-1){let s=this.EV[2*e],h=this.EV[2*e+1];t[i][0]=this.X[s],t[i][1]=this.Y[s],t[i][2]=this.X[h],t[i][3]=this.Y[h],i+=1}return i}_u(t){let s=this.vnum,i=0;for(let e=0;e<s;e++)this.VA[e]>-1&&(t[i][0]=this.X[e],t[i][1]=this.Y[e],i+=1);return i}_v(t){let s=this.X[this.EV[2*t]]-this.X[this.EV[2*t+1]],i=this.Y[this.EV[2*t]]-this.Y[this.EV[2*t+1]];return Math.sqrt(s*s+i*i)}_w(t,s=1){let i,e,h=[],n=this.snum;if(s>0){i=t[0][0],e=t[0][1],h.push(this._n(i,e,n,0));for(let s=1;s<t.length-1;s++)i=t[s][0],e=t[s][1],h.push(this._n(i,e,n,1));i=t[t.length-1][0],e=t[t.length-1][1],h.push(this._n(i,e,n,0))}else for(let s=0;s<t.length;s++)i=t[s][0],e=t[s][1],h.push(this._n(i,e,n,1));for(let t=0;t<h.length-1;t++)this._p(h[t],h[t+1]);this.snum=n+1}_x(t,s,i,e){let h=[],n=this.snum,r=e.length;for(let o=0;o<r;o++){const r=e[o],c=t+Math.cos(r)*i,l=s+Math.sin(r)*i;h.push(this._n(c,l,n,1))}for(let t=0;t<h.length-1;t++)this._p(h[t],h[t+1]);this._p(h[0],h[r-1]),this.snum=n+1}_y(t,s=-1){if(this._q(t)<0)throw new Error("e1 does not exist");if(t<0)throw new Error("invalid edge in _y e1"+t);let i=this.EV[2*t],e=this.EV[2*t+1],h=this.VS[i];if(h<0)throw new Error("Invalid segment id.");if(s>0){let h=this.X[i]-this.X[e],n=this.Y[i]-this.Y[e];if(h*h+n*n<s*s)throw new Error("edge too short, e1,"+t)}let n=.5*(this.X[i]+this.X[e]),r=.5*(this.Y[i]+this.Y[e]),o=this._n(n,r,h,1);return this._s(t),this._p(i,o),this._p(e,o),1}_aa(t){let s=this.vnum;for(let i=0;i<s;i++){if(this.X[i]<(RS-CS)/2/RS+t||this.X[i]>1-(RS-CS)/2/RS-t)return-1;if(this.Y[i]<(RS-CS)/2/RS+t||this.Y[i]>1-(RS-CS)/2/RS-t)return-1}return 1}_ab(){return this.edgeNumber}}class DifferentialLine extends Segments{constructor(t,s,i,e){super(t,s),this.SX=[],this.SY=[],this.SD=[],this.nearl=i,this.farl=e}_a(t){let s=[];const i=this.vnum;for(let e=0;e<i;e++){this.SX[e]=0,this.SY[e]=0;let i=this.zonemap._ak(this.X[e],this.Y[e],this.farl,s);this._b(e,s,i,t,this.SX,this.SY)}for(let t=0;t<i;t++)this.VA[t]<0||(this.X[t]=this.X[t]+this.SX[t],this.Y[t]=this.Y[t]+this.SY[t]);for(let t=0;t<i;t++)if(!(this.VA[t]<0))try{this.zonemap._aj(t)}catch{}}_b(t,s,i,e,h,n){if(this.VA[t]<1)return-1;let r,o,c=this.VE[2*t],l=this.VE[2*t+1];r=this.EV[2*c]==t?this.EV[2*c+1]:this.EV[2*c],o=this.EV[2*l]==t?this.EV[2*l+1]:this.EV[2*l];let a=0,f=0;for(let h=0;h<i;h++){let i=s[h],n=this.X[t]-this.X[i],c=this.Y[t]-this.Y[i],l=Math.sqrt(n*n+c*c);if(i==r||i==o){if(l<this.nearl||l<=0)continue;a+=-n/l*e,f+=-c/l*e}else{if(l>this.farl||l<=0)continue;a+=n*(this.farl/l-1)*e,f+=c*(this.farl/l-1)*e}}return h[t]+=a,n[t]+=f,1}}function _c(t,s,e){const h=t._ab();let n=[],r=[];for(let t=0;t<h;t++)n.push(Math.random());const o=n.length;for(i=0;i<o;i++)n[i]>e||!n[i]||r.push(i);let c=r.length;for(let i=0;i<c;i++){if(!(t._v(r[i])<s))try{t._y(r[i])}catch(t){continue}}}function _e(t,s,i){for(let e=0;e<s;e++)t[e]=i;return t}function _f(t,s,i){i[2*t]<0?i[2*t]=s:i[2*t+1]=s}function _g(t,s,i){return i[2*t]==s?(i[2*t]=i[2*t+1],i[2*t+1]=-1):i[2*t+1]==s&&(i[2*t+1]=-1),i}function _h(){ctx.fillStyle=BACK,ctx.fillRect(0,0,RS,RS)}function _k(t){let s=t.length;for(let i=0;i<s;i++){let s=t[i],e=s[0],h=s[1];ctx.strokeStyle=!gf||pe?"rgb("+BACK.toString()+")":CO<5?"rgb("+FRONT.toString()+")":"rgb("+cf.toString()+")",ctx.strokeRect(e*RS,h*RS,ONE*RS,ONE*RS)}}function _l(t){const s=t.length;for(let i=0;i<s;i++){let s=t[i],e=s[2]-s[0],h=s[3]-s[1],n=Math.atan2(h,e),r=[Math.cos(n),Math.sin(n)],o=Math.sqrt(e**2,h**2),c=Math.random()*o,l=s[0]+r[0]*c,a=s[1]+r[1]*c;ctx.fillStyle=!gf||pe?"rgb("+BACK.toString()+")":CO<5?"rgb("+FRONT.toString()+")":"rgb("+cf.toString()+")",ctx.fillRect(l*RS,a*RS,ONE*RS,ONE*RS)}}const SIZE=1200,CO=9,RYTHM=9,INDEX=1,RS=SIZE,NMAX=1e4,ONE=1/RS,STP=1*ONE,NEARL=10*ONE,FARL=100*ONE,INIT_RAD=5*ONE,INIT_NUM=12,MID=.5,TWOPI=2*Math.PI;let FRONT,BACK,CS,nc,nvc,gf,DF,coloroptions,cf,sl,ctx,sc=1,dp=[],pp=[],pn=100,ps=!1,pe=!1,pf=!1,ccs=[],ci=0,co=1,fcs=[];function preload(){FRONT=[255,0,0],BACK=[0,0,0],_mfcs(),_mcs()}function _mfcs(){for(let t=0;t<256;t++)fcs.push([255,0,t]);for(let t=255;t>=0;t--)fcs.push([t,0,255]);for(let t=0;t<256;t++)fcs.push([0,t,255]);for(let t=255;t>=0;t--)fcs.push([0,255,t]);for(let t=0;t<256;t++)fcs.push([t,255,0]);for(let t=255;t>=0;t--)fcs.push([255,t,0])}function _mcs(){let t=fcs.length;for(let s=0;s<t;s++)if(fcs[s].join(",")===FRONT.join(",")){ci=s;break}}function _ics(){sc=1,RYTHM>2?(CS=RS,step_unit=parseInt(RS/(RYTHM-1)),sl=parseInt(RS/(RYTHM-1))):sl=step_unit=CS=RS}function setup(){let t=document.getElementById("canvas");t.width=SIZE,t.height=SIZE,ctx=t.getContext("2d"),_ics(),gf=!0,CO<9&&(ci=0),Math.seedrandom(INDEX),cf=CO>4&&CO<9?FRONT[0]:FRONT,DF=new DifferentialLine(NMAX,2*FARL,NEARL,FARL);let s=[];for(let t=0;t<INIT_NUM;t++)s.push(Math.random()*TWOPI);s.sort(),DF._x(MID,MID,.1*FARL,s),_h(),draw()}function draw(){cf=fcs[ci],ci>=fcs.length-1&&(co=2),ci<=0&&(co=1),1==co?ci++:ci--,wrap(),requestAnimationFrame(draw)}function wrap(){_ic();let t=steps(DF),s=DF._t(nc),i=nc.slice(0,s);if(ps)i=pp.shift(),pp.length>=pn*sc?(pe=!0,pf=!1):(pe=!1,pf=!0);else if(gf?dp.push(i):i=dp.pop(),null==i)return void setup();if(_l(i),Math.random()<.1){let t=DF._u(nvc);_k(i=nvc.slice(0,t))}return t}function _ic(){nc=[],nvc=[];for(let t=0;t<NMAX;t++)nc[t]=[0,0,0,0];for(let t=0;t<NMAX;t++)nvc[t]=[0,0,0,0]}function steps(t){if(ps)0==pp.length&&(ps=!1,sc<RYTHM-1?sc++:sc=1,sl=step_unit*sc);else if(gf&&(t._a(STP),_c(t,NEARL,.8*NEARL)),check_step(sl,t))if(sc<RYTHM-1){ps=!0;let t=dp.length;for(let s=1;s<=pn*sc;s++)pp.push(dp[t-s]);for(let s=pn*sc;s>0;s--)pp.push(dp[t-s])}else 1==RYTHM&&cancelAnimationFrame(draw),gf&&(cancelAnimationFrame(draw),sleep(1e3*parseInt(RYTHM+1)),requestAnimationFrame(draw)),gf=!1}function check_step(t,s){CS=t;let i=s._aa(3*STP)<0;return CS=RS,i}function sleep(t){const s=Date.now();let i=null;do{i=Date.now()}while(i-s<t)}preload(),setup();
            </script>
        </canvas>
    </body>
</html>